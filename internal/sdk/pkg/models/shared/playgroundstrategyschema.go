// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package shared

import (
	"bytes"
	"encoding/json"
	"errors"
	"fmt"
)

// PlaygroundStrategySchemaLinks - A set of links to actions you can perform on this strategy
type PlaygroundStrategySchemaLinks struct {
	Edit string `json:"edit"`
}

// PlaygroundStrategySchemaResult2EvaluationStatus - Signals that this strategy was evaluated successfully.
type PlaygroundStrategySchemaResult2EvaluationStatus string

const (
	PlaygroundStrategySchemaResult2EvaluationStatusComplete PlaygroundStrategySchemaResult2EvaluationStatus = "complete"
)

func (e PlaygroundStrategySchemaResult2EvaluationStatus) ToPointer() *PlaygroundStrategySchemaResult2EvaluationStatus {
	return &e
}

func (e *PlaygroundStrategySchemaResult2EvaluationStatus) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "complete":
		*e = PlaygroundStrategySchemaResult2EvaluationStatus(v)
		return nil
	default:
		return fmt.Errorf("invalid value for PlaygroundStrategySchemaResult2EvaluationStatus: %v", v)
	}
}

// PlaygroundStrategySchemaResult2VariantPayloadType - The format of the payload.
type PlaygroundStrategySchemaResult2VariantPayloadType string

const (
	PlaygroundStrategySchemaResult2VariantPayloadTypeJSON   PlaygroundStrategySchemaResult2VariantPayloadType = "json"
	PlaygroundStrategySchemaResult2VariantPayloadTypeCsv    PlaygroundStrategySchemaResult2VariantPayloadType = "csv"
	PlaygroundStrategySchemaResult2VariantPayloadTypeString PlaygroundStrategySchemaResult2VariantPayloadType = "string"
)

func (e PlaygroundStrategySchemaResult2VariantPayloadType) ToPointer() *PlaygroundStrategySchemaResult2VariantPayloadType {
	return &e
}

func (e *PlaygroundStrategySchemaResult2VariantPayloadType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "json":
		fallthrough
	case "csv":
		fallthrough
	case "string":
		*e = PlaygroundStrategySchemaResult2VariantPayloadType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for PlaygroundStrategySchemaResult2VariantPayloadType: %v", v)
	}
}

// PlaygroundStrategySchemaResult2VariantPayload - An optional payload attached to the variant.
type PlaygroundStrategySchemaResult2VariantPayload struct {
	// The format of the payload.
	Type PlaygroundStrategySchemaResult2VariantPayloadType `json:"type"`
	// The payload value stringified.
	Value string `json:"value"`

	AdditionalProperties interface{} `json:"-"`
}
type _PlaygroundStrategySchemaResult2VariantPayload PlaygroundStrategySchemaResult2VariantPayload

func (c *PlaygroundStrategySchemaResult2VariantPayload) UnmarshalJSON(bs []byte) error {
	data := _PlaygroundStrategySchemaResult2VariantPayload{}

	if err := json.Unmarshal(bs, &data); err != nil {
		return err
	}
	*c = PlaygroundStrategySchemaResult2VariantPayload(data)

	additionalFields := make(map[string]interface{})

	if err := json.Unmarshal(bs, &additionalFields); err != nil {
		return err
	}
	delete(additionalFields, "type")
	delete(additionalFields, "value")

	c.AdditionalProperties = additionalFields

	return nil
}

func (c PlaygroundStrategySchemaResult2VariantPayload) MarshalJSON() ([]byte, error) {
	out := map[string]interface{}{}
	bs, err := json.Marshal(_PlaygroundStrategySchemaResult2VariantPayload(c))
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	bs, err = json.Marshal(c.AdditionalProperties)
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	return json.Marshal(out)
}

// PlaygroundStrategySchemaResult2Variant - The feature variant you receive based on the provided context or the _disabled
//
//	variant_. If a feature is disabled or doesn't have any
//	variants, you would get the _disabled variant_.
//	Otherwise, you'll get one of the feature's defined variants.
type PlaygroundStrategySchemaResult2Variant struct {
	// Whether the variant is enabled or not. If the feature is disabled or if it doesn't have variants, this property will be `false`
	Enabled bool `json:"enabled"`
	// The variant's name. If there is no variant or if the toggle is disabled, this will be `disabled`
	Name string `json:"name"`
	// An optional payload attached to the variant.
	Payload *PlaygroundStrategySchemaResult2VariantPayload `json:"payload,omitempty"`

	AdditionalProperties interface{} `json:"-"`
}
type _PlaygroundStrategySchemaResult2Variant PlaygroundStrategySchemaResult2Variant

func (c *PlaygroundStrategySchemaResult2Variant) UnmarshalJSON(bs []byte) error {
	data := _PlaygroundStrategySchemaResult2Variant{}

	if err := json.Unmarshal(bs, &data); err != nil {
		return err
	}
	*c = PlaygroundStrategySchemaResult2Variant(data)

	additionalFields := make(map[string]interface{})

	if err := json.Unmarshal(bs, &additionalFields); err != nil {
		return err
	}
	delete(additionalFields, "enabled")
	delete(additionalFields, "name")
	delete(additionalFields, "payload")

	c.AdditionalProperties = additionalFields

	return nil
}

func (c PlaygroundStrategySchemaResult2Variant) MarshalJSON() ([]byte, error) {
	out := map[string]interface{}{}
	bs, err := json.Marshal(_PlaygroundStrategySchemaResult2Variant(c))
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	bs, err = json.Marshal(c.AdditionalProperties)
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	return json.Marshal(out)
}

// PlaygroundStrategySchemaResult2 - The strategy's evaluation result. If the strategy is a custom strategy that Unleash can't evaluate, `evaluationStatus` will be `unknown`. Otherwise, it will be `true` or `false`
type PlaygroundStrategySchemaResult2 struct {
	// Whether this strategy evaluates to true or not.
	Enabled bool `json:"enabled"`
	// Signals that this strategy was evaluated successfully.
	EvaluationStatus PlaygroundStrategySchemaResult2EvaluationStatus `json:"evaluationStatus"`
	// The feature variant you receive based on the provided context or the _disabled
	//                           variant_. If a feature is disabled or doesn't have any
	//                           variants, you would get the _disabled variant_.
	//                           Otherwise, you'll get one of the feature's defined variants.
	Variant *PlaygroundStrategySchemaResult2Variant `json:"variant,omitempty"`
	// The feature variants.
	Variants []VariantSchema `json:"variants,omitempty"`

	AdditionalProperties interface{} `json:"-"`
}
type _PlaygroundStrategySchemaResult2 PlaygroundStrategySchemaResult2

func (c *PlaygroundStrategySchemaResult2) UnmarshalJSON(bs []byte) error {
	data := _PlaygroundStrategySchemaResult2{}

	if err := json.Unmarshal(bs, &data); err != nil {
		return err
	}
	*c = PlaygroundStrategySchemaResult2(data)

	additionalFields := make(map[string]interface{})

	if err := json.Unmarshal(bs, &additionalFields); err != nil {
		return err
	}
	delete(additionalFields, "enabled")
	delete(additionalFields, "evaluationStatus")
	delete(additionalFields, "variant")
	delete(additionalFields, "variants")

	c.AdditionalProperties = additionalFields

	return nil
}

func (c PlaygroundStrategySchemaResult2) MarshalJSON() ([]byte, error) {
	out := map[string]interface{}{}
	bs, err := json.Marshal(_PlaygroundStrategySchemaResult2(c))
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	bs, err = json.Marshal(c.AdditionalProperties)
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	return json.Marshal(out)
}

// PlaygroundStrategySchemaResult1Enabled2 - Whether this strategy resolves to `false` or if it might resolve to `true`. Because Unleash can't evaluate the strategy, it can't say for certain whether it will be `true`, but if you have failing constraints or segments, it _can_ determine that your strategy would be `false`.
type PlaygroundStrategySchemaResult1Enabled2 string

const (
	PlaygroundStrategySchemaResult1Enabled2Unknown PlaygroundStrategySchemaResult1Enabled2 = "unknown"
)

func (e PlaygroundStrategySchemaResult1Enabled2) ToPointer() *PlaygroundStrategySchemaResult1Enabled2 {
	return &e
}

func (e *PlaygroundStrategySchemaResult1Enabled2) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "unknown":
		*e = PlaygroundStrategySchemaResult1Enabled2(v)
		return nil
	default:
		return fmt.Errorf("invalid value for PlaygroundStrategySchemaResult1Enabled2: %v", v)
	}
}

type PlaygroundStrategySchemaResult1EnabledType string

const (
	PlaygroundStrategySchemaResult1EnabledTypeBoolean                                 PlaygroundStrategySchemaResult1EnabledType = "boolean"
	PlaygroundStrategySchemaResult1EnabledTypePlaygroundStrategySchemaResult1Enabled2 PlaygroundStrategySchemaResult1EnabledType = "playgroundStrategySchema_result_1_enabled_2"
)

type PlaygroundStrategySchemaResult1Enabled struct {
	Boolean                                 *bool
	PlaygroundStrategySchemaResult1Enabled2 *PlaygroundStrategySchemaResult1Enabled2

	Type PlaygroundStrategySchemaResult1EnabledType
}

func CreatePlaygroundStrategySchemaResult1EnabledBoolean(boolean bool) PlaygroundStrategySchemaResult1Enabled {
	typ := PlaygroundStrategySchemaResult1EnabledTypeBoolean

	return PlaygroundStrategySchemaResult1Enabled{
		Boolean: &boolean,
		Type:    typ,
	}
}

func CreatePlaygroundStrategySchemaResult1EnabledPlaygroundStrategySchemaResult1Enabled2(playgroundStrategySchemaResult1Enabled2 PlaygroundStrategySchemaResult1Enabled2) PlaygroundStrategySchemaResult1Enabled {
	typ := PlaygroundStrategySchemaResult1EnabledTypePlaygroundStrategySchemaResult1Enabled2

	return PlaygroundStrategySchemaResult1Enabled{
		PlaygroundStrategySchemaResult1Enabled2: &playgroundStrategySchemaResult1Enabled2,
		Type:                                    typ,
	}
}

func (u *PlaygroundStrategySchemaResult1Enabled) UnmarshalJSON(data []byte) error {
	var d *json.Decoder

	boolean := new(bool)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&boolean); err == nil {
		u.Boolean = boolean
		u.Type = PlaygroundStrategySchemaResult1EnabledTypeBoolean
		return nil
	}

	playgroundStrategySchemaResult1Enabled2 := new(PlaygroundStrategySchemaResult1Enabled2)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&playgroundStrategySchemaResult1Enabled2); err == nil {
		u.PlaygroundStrategySchemaResult1Enabled2 = playgroundStrategySchemaResult1Enabled2
		u.Type = PlaygroundStrategySchemaResult1EnabledTypePlaygroundStrategySchemaResult1Enabled2
		return nil
	}

	return errors.New("could not unmarshal into supported union types")
}

func (u PlaygroundStrategySchemaResult1Enabled) MarshalJSON() ([]byte, error) {
	if u.Boolean != nil {
		return json.Marshal(u.Boolean)
	}

	if u.PlaygroundStrategySchemaResult1Enabled2 != nil {
		return json.Marshal(u.PlaygroundStrategySchemaResult1Enabled2)
	}

	return nil, nil
}

// PlaygroundStrategySchemaResult1EvaluationStatus - Signals that this strategy could not be evaluated. This is most likely because you're using a custom strategy that Unleash doesn't know about.
type PlaygroundStrategySchemaResult1EvaluationStatus string

const (
	PlaygroundStrategySchemaResult1EvaluationStatusIncomplete PlaygroundStrategySchemaResult1EvaluationStatus = "incomplete"
)

func (e PlaygroundStrategySchemaResult1EvaluationStatus) ToPointer() *PlaygroundStrategySchemaResult1EvaluationStatus {
	return &e
}

func (e *PlaygroundStrategySchemaResult1EvaluationStatus) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "incomplete":
		*e = PlaygroundStrategySchemaResult1EvaluationStatus(v)
		return nil
	default:
		return fmt.Errorf("invalid value for PlaygroundStrategySchemaResult1EvaluationStatus: %v", v)
	}
}

// PlaygroundStrategySchemaResult1 - The strategy's evaluation result. If the strategy is a custom strategy that Unleash can't evaluate, `evaluationStatus` will be `unknown`. Otherwise, it will be `true` or `false`
type PlaygroundStrategySchemaResult1 struct {
	// Whether this strategy resolves to `false` or if it might resolve to `true`. Because Unleash can't evaluate the strategy, it can't say for certain whether it will be `true`, but if you have failing constraints or segments, it _can_ determine that your strategy would be `false`.
	Enabled PlaygroundStrategySchemaResult1Enabled `json:"enabled"`
	// Signals that this strategy could not be evaluated. This is most likely because you're using a custom strategy that Unleash doesn't know about.
	EvaluationStatus PlaygroundStrategySchemaResult1EvaluationStatus `json:"evaluationStatus"`

	AdditionalProperties interface{} `json:"-"`
}
type _PlaygroundStrategySchemaResult1 PlaygroundStrategySchemaResult1

func (c *PlaygroundStrategySchemaResult1) UnmarshalJSON(bs []byte) error {
	data := _PlaygroundStrategySchemaResult1{}

	if err := json.Unmarshal(bs, &data); err != nil {
		return err
	}
	*c = PlaygroundStrategySchemaResult1(data)

	additionalFields := make(map[string]interface{})

	if err := json.Unmarshal(bs, &additionalFields); err != nil {
		return err
	}
	delete(additionalFields, "enabled")
	delete(additionalFields, "evaluationStatus")

	c.AdditionalProperties = additionalFields

	return nil
}

func (c PlaygroundStrategySchemaResult1) MarshalJSON() ([]byte, error) {
	out := map[string]interface{}{}
	bs, err := json.Marshal(_PlaygroundStrategySchemaResult1(c))
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	bs, err = json.Marshal(c.AdditionalProperties)
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	return json.Marshal(out)
}

type PlaygroundStrategySchemaResultType string

const (
	PlaygroundStrategySchemaResultTypePlaygroundStrategySchemaResult1 PlaygroundStrategySchemaResultType = "playgroundStrategySchema_result_1"
	PlaygroundStrategySchemaResultTypePlaygroundStrategySchemaResult2 PlaygroundStrategySchemaResultType = "playgroundStrategySchema_result_2"
)

type PlaygroundStrategySchemaResult struct {
	PlaygroundStrategySchemaResult1 *PlaygroundStrategySchemaResult1
	PlaygroundStrategySchemaResult2 *PlaygroundStrategySchemaResult2

	Type PlaygroundStrategySchemaResultType
}

func CreatePlaygroundStrategySchemaResultPlaygroundStrategySchemaResult1(playgroundStrategySchemaResult1 PlaygroundStrategySchemaResult1) PlaygroundStrategySchemaResult {
	typ := PlaygroundStrategySchemaResultTypePlaygroundStrategySchemaResult1

	return PlaygroundStrategySchemaResult{
		PlaygroundStrategySchemaResult1: &playgroundStrategySchemaResult1,
		Type:                            typ,
	}
}

func CreatePlaygroundStrategySchemaResultPlaygroundStrategySchemaResult2(playgroundStrategySchemaResult2 PlaygroundStrategySchemaResult2) PlaygroundStrategySchemaResult {
	typ := PlaygroundStrategySchemaResultTypePlaygroundStrategySchemaResult2

	return PlaygroundStrategySchemaResult{
		PlaygroundStrategySchemaResult2: &playgroundStrategySchemaResult2,
		Type:                            typ,
	}
}

func (u *PlaygroundStrategySchemaResult) UnmarshalJSON(data []byte) error {
	var d *json.Decoder

	playgroundStrategySchemaResult1 := new(PlaygroundStrategySchemaResult1)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&playgroundStrategySchemaResult1); err == nil {
		u.PlaygroundStrategySchemaResult1 = playgroundStrategySchemaResult1
		u.Type = PlaygroundStrategySchemaResultTypePlaygroundStrategySchemaResult1
		return nil
	}

	playgroundStrategySchemaResult2 := new(PlaygroundStrategySchemaResult2)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&playgroundStrategySchemaResult2); err == nil {
		u.PlaygroundStrategySchemaResult2 = playgroundStrategySchemaResult2
		u.Type = PlaygroundStrategySchemaResultTypePlaygroundStrategySchemaResult2
		return nil
	}

	return errors.New("could not unmarshal into supported union types")
}

func (u PlaygroundStrategySchemaResult) MarshalJSON() ([]byte, error) {
	if u.PlaygroundStrategySchemaResult1 != nil {
		return json.Marshal(u.PlaygroundStrategySchemaResult1)
	}

	if u.PlaygroundStrategySchemaResult2 != nil {
		return json.Marshal(u.PlaygroundStrategySchemaResult2)
	}

	return nil, nil
}

type PlaygroundStrategySchema struct {
	// The strategy's constraints and their evaluation results.
	Constraints []PlaygroundConstraintSchema `json:"constraints"`
	// The strategy's status. Disabled strategies are not evaluated
	Disabled *bool `json:"disabled"`
	// The strategy's id.
	ID string `json:"id"`
	// A set of links to actions you can perform on this strategy
	Links PlaygroundStrategySchemaLinks `json:"links"`
	// The strategy's name.
	Name string `json:"name"`
	// A list of parameters for a strategy
	Parameters map[string]string `json:"parameters"`
	// The strategy's evaluation result. If the strategy is a custom strategy that Unleash can't evaluate, `evaluationStatus` will be `unknown`. Otherwise, it will be `true` or `false`
	Result PlaygroundStrategySchemaResult `json:"result"`
	// The strategy's segments and their evaluation results.
	Segments []PlaygroundSegmentSchema `json:"segments"`
	// Description of the feature's purpose.
	Title *string `json:"title,omitempty"`

	AdditionalProperties interface{} `json:"-"`
}
type _PlaygroundStrategySchema PlaygroundStrategySchema

func (c *PlaygroundStrategySchema) UnmarshalJSON(bs []byte) error {
	data := _PlaygroundStrategySchema{}

	if err := json.Unmarshal(bs, &data); err != nil {
		return err
	}
	*c = PlaygroundStrategySchema(data)

	additionalFields := make(map[string]interface{})

	if err := json.Unmarshal(bs, &additionalFields); err != nil {
		return err
	}
	delete(additionalFields, "constraints")
	delete(additionalFields, "disabled")
	delete(additionalFields, "id")
	delete(additionalFields, "links")
	delete(additionalFields, "name")
	delete(additionalFields, "parameters")
	delete(additionalFields, "result")
	delete(additionalFields, "segments")
	delete(additionalFields, "title")

	c.AdditionalProperties = additionalFields

	return nil
}

func (c PlaygroundStrategySchema) MarshalJSON() ([]byte, error) {
	out := map[string]interface{}{}
	bs, err := json.Marshal(_PlaygroundStrategySchema(c))
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	bs, err = json.Marshal(c.AdditionalProperties)
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	return json.Marshal(out)
}
