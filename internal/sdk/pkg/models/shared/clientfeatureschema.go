// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package shared

import (
	"encoding/json"
)

// ClientFeatureSchema - Feature toggle configuration used by SDKs to evaluate state of a toggle
type ClientFeatureSchema struct {
	// A description of the toggle
	Description *string `json:"description,omitempty"`
	// Whether the feature flag is enabled for the current API key or not. This is ANDed with the evaluation results of the strategies list, so if this is false, the evaluation result will always be false
	Enabled bool `json:"enabled"`
	// Set to true if SDKs should trigger [impression events](https://docs.getunleash.io/reference/impression-data) when this toggle is evaluated
	ImpressionData *bool `json:"impressionData,omitempty"`
	// The unique name of a feature toggle. Is validated to be URL safe on creation
	Name string `json:"name"`
	// Which project this feature toggle belongs to
	Project *string `json:"project,omitempty"`
	// If this is true Unleash believes this feature toggle has been active longer than Unleash expects a toggle of this type to be active
	Stale *bool `json:"stale,omitempty"`
	// Evaluation strategies for this toggle. Each entry in this list will be evaluated and ORed together
	Strategies []FeatureStrategySchema `json:"strategies,omitempty"`
	// What kind of feature flag is this. Refer to the documentation on [feature toggle types](https://docs.getunleash.io/reference/feature-toggle-types) for more information
	Type *string `json:"type,omitempty"`
	// [Variants](https://docs.getunleash.io/reference/feature-toggle-variants#what-are-variants) configured for this toggle
	Variants []VariantSchema `json:"variants,omitempty"`

	AdditionalProperties interface{} `json:"-"`
}
type _ClientFeatureSchema ClientFeatureSchema

func (c *ClientFeatureSchema) UnmarshalJSON(bs []byte) error {
	data := _ClientFeatureSchema{}

	if err := json.Unmarshal(bs, &data); err != nil {
		return err
	}
	*c = ClientFeatureSchema(data)

	additionalFields := make(map[string]interface{})

	if err := json.Unmarshal(bs, &additionalFields); err != nil {
		return err
	}
	delete(additionalFields, "description")
	delete(additionalFields, "enabled")
	delete(additionalFields, "impressionData")
	delete(additionalFields, "name")
	delete(additionalFields, "project")
	delete(additionalFields, "stale")
	delete(additionalFields, "strategies")
	delete(additionalFields, "type")
	delete(additionalFields, "variants")

	c.AdditionalProperties = additionalFields

	return nil
}

func (c ClientFeatureSchema) MarshalJSON() ([]byte, error) {
	out := map[string]interface{}{}
	bs, err := json.Marshal(_ClientFeatureSchema(c))
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	bs, err = json.Marshal(c.AdditionalProperties)
	if err != nil {
		return nil, err
	}

	if err := json.Unmarshal([]byte(bs), &out); err != nil {
		return nil, err
	}

	return json.Marshal(out)
}
